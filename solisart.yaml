#=== SolisArt Integration ======================================
template:
  - binary_sensor:
      #SolisArt Chaudière
      - name: "solisart Chaudiere1"
        unique_id: "solisart_rl0"
        state: "{{ state_attr('sensor.solisart', 'rl0') }}"
#      - name: "solisart Chaudiere2"
#        unique_id: "solisart_rl4"
#        state: "{{ state_attr('sensor.solisart', 'rl4') }}"
  - sensor:
      # Températures -----------------------------------------------
      - name: "solisart_T1"
        unique_id: "solisart_T1"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't1') }}"
      - name: "solisart_T2"
        unique_id: "solisart_T2"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't2') }}"
      - name: "solisart_T3"
        unique_id: "solisart_T3"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't3') }}"
      - name: "solisart_T4"
        unique_id: "solisart_T4"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't4') }}"
      - name: "solisart_T5"
        unique_id: "solisart_T5"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't5') }}"
      - name: "solisart_T6"
        unique_id: "solisart_T6"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't6') }}"
      - name: "solisart_T7"
        unique_id: "solisart_T7"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't7') }}"
      - name: "solisart_T8"
        unique_id: "solisart_T8"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't8') }}"
      - name: "solisart_T9"
        unique_id: "solisart_T9"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't9') }}"
      - name: "solisart_T11"
        unique_id: "solisart_T11"
        unit_of_measurement: "°C"
        device_class: temperature
        state: "{{ state_attr('sensor.solisart', 't11') }}"
        # Débitmètres -------------------------------------------------
#      - name: "solisart_flowmeter1"
#        unique_id: "solisart_flowmeter1"
#        unit_of_measurement: "L/min"
#        state: "{{ state_attr('sensor.solisart', 'fl1') }}"
      # a compléter de fl2 à fl6
      # Circulateurs --------------------------------------------------
      - name: "solisart_cir1 C4 Bal Appoint"
        unique_id: "solisart_tr1"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'tr1') }}"
      - name: "solisart_cir2 C5 Bal Solaire"
        unique_id: "solisart_tr2"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'tr2') }}"
      - name: "solisart_cir3 C6 Bal Tampon"
        unique_id: "solisart_tr3"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'tr3') }}"
#      - name: "solisart_cir4"
#        unique_id: "solisart_tr4"
#        unit_of_measurement: "%"
#        state: "{{ state_attr('sensor.solisart', 'tr4') }}"
      - name: "solisart_cir5 C1 Chauf Maison" #Zone 1
        unique_id: "solisart_tr5"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'tr5') }}"
#      - name: "solisart_cir6"
#        unique_id: "solisart_tr6"
#        unit_of_measurement: "%"
#        state: "{{ state_attr('sensor.solisart', 'tr6') }}"
#      - name: "solisart_cir7"
#        unique_id: "solisart_tr7"
#        unit_of_measurement: "%"
#        state: "{{ state_attr('sensor.solisart', 'tr7') }}"
      # Vanne 3 Voies -----------------------------------------------
      - name: "solisart_V3VTAM_B"
        unique_id: "solisart_v3v0"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'v3v0') }}"
      - name: "solisart_V3VAPP_B"
        unique_id: "solv3v1"
        unit_of_measurement: "%"
        state: "{{ state_attr('sensor.solisart', 'v3v1') }}"
      # - name: "solisart_V3V2"
      #  unique_id: "solv3v2"
      #  unit_of_measurement: "%"
      #  state: "{{ state_attr('sensor.solisart', 'v3v2') }}"
 # Mouvement des V3V (probablement Binary sensor - QUELLE UTILITE ???)
#      - name: "solisart_V3VAPP moving to App"
#        unique_id: "solisart_v3v0_to_app"
#        state: "{{ state_attr('sensor.solisart', 'tr8') }}"
#      - name: "solisart_V3VAPP moving to solaire"
#        unique_id: "solisart_v3v0_to_solaire"
#        state: "{{ state_attr('sensor.solisart', 'tr9') }}"
#      - name: "solisart_V3VTAM moving to Solaire"
#        unique_id: "solisart_v3v1_to_solaire"
#        state: "{{ state_attr('sensor.solisart', 'tr12') }}"
#      - name: "solisart_V3VTAM moving to Tampon"
#        unique_id: "solisart_v3v1_to_tampon"
#        state: "{{ state_attr('sensor.solisart', 'tr13') }}"

      #Sensor de fonctionnement ----------------------------------------------
      - name: "solisart_LastUpdate"
        unique_id: "solisart_LastUpdate"
        state: "{{ state_attr('sensor.solisart', 'LastUpdate') }}"
      # sensors calculés ------------------
      - name: "solisart_V3VTAM_A"
        unique_id: "solisart_v3v0_a"
        unit_of_measurement: "%"
        state: "{{ 100 - state_attr('sensor.solisart', 'v3v0') | float()}}"
      - name: "solisart_V3VAPP_A"
        unique_id: "solv3v1_a"
        unit_of_measurement: "%"
        state: "{{ 100 - state_attr('sensor.solisart', 'v3v1') | float() }}"
      - name: "solisart_DT_Capteur"
        unique_id: "solisart_dt_capteur"
        unit_of_measurement: "°C"
        state: "{{ (((state_attr('sensor.solisart', 't1')| float) - (state_attr('sensor.solisart', 't2') | float))) |round(1) }}"
      - name: "solisart_DT_Maison"
        unique_id: "solisart_dt_maison"
        unit_of_measurement: "°C"
        state: "{{ (((state_attr('sensor.solisart', 't8')| float) - (state_attr('sensor.solisart', 't7') | float))) | round(1)}}"

#====== Ne rien modifier ci-dessous ============================================================================================
#=======================================================================================================================
command_line: #https://www.home-assistant.io/integrations/command_line/
  #SolisArt Interrogation
  - sensor:
      name: "SolisArt"
      unique_id: solisart_get_data
      value_template: "" 
      scan_interval: 30
      command: "python ./mes_scripts_python/Solisart.py"
      json_attributes:
        - "t1"
        - "t2"
        - "t3"
        - "t4"
        - "t5"
        - "t6"
        - "t7"
        - "t8"
        - "t9"
        - "t10"
        - "t11"
        - "t12"
        - "t13"
        - "t14"
        - "t15"
        - "t16"
        - "fl1"
        - "fl2"
        - "fl3"
        - "fl4"
        - "fl5"
        - "fl6"
        - "rl0"
        - "rl4"
        - "tr1"
        - "tr2"
        - "tr3"
        - "tr4"
        - "tr5"
        - "tr6"
        - "tr7"
        - "tr8"
        - "tr9"
        - "tr10"
        - "tr11"
        - "tr12"
        - "tr13"
        - "v3v0"
        - "v3v1"
        - "v3v2"
        - "LastUpdate"
